
# RDD (Resilient Distributed Datasets)

> RDD; 단력적 분산 데이터셋

분산된 이뮤터블(immutable) 자바 객체 컬렉션인 RDD는 연산을 매우 빠르게 하며 아파치 스파크의 핵심이다.

이름에서 알 수 있듯이, 데이터셋이 분산되어있다. 데이터셋은 키를 기반으로 덩어리 단위로 쪼개져있고 실행 노드(executor node)로 분산되어있다. 이렇게 함으로써 데이터셋에 대한 연산 속도를 매우 빠르게 할 수 있다. RDD는 각각 덩어리에 적용된 모든 트렌스포메이션을 추적하는데, 이는 연산 속도를 빠르게 하고 어떤 문제로인해 데이터 손실이 발생했을 때 대비책을 제공하고 있다. 데이터의 흐름은 데이터 손실에 대한 다른 방어책으로 데이터 복제가 아닌 다른 방법을 이용해 데이터를 복구한다. 

## 1. RDD의 내부 작동 원리

RDD는 **병렬**로 동족하고, 이는 스파크의 가장 큰 장점이다. 각 트랜스포메이션은 속도를 비약적으로 향상시키기 위해 실행된다.

데이터셋에 대한 트랜스포메이션은 게으르다. 이 말은 모든 트랜스포메이션은 데이터셋에 대한 액션이 호출되었을 때 실행된다는 뜻이다. 이로 인해 스파크의 실행이 최적화된다. 예를 들어, 데이터 분셕가가 데이터셋에 익숙해지기 위해 수행하는 다음 일반적인 과저정을 보라.

1. 특정 칼럼의 고유한 값의 개수를 세기
2. A로 시작하는 것들 찾기
3. 스크린에 결과 출력하기

위에 언급된 과정과 같이 간단하게, A로 시작하는 단어들이 궁금하다면 다른 아이템의 고유 값 개수를 세는 것은 의미없는 작업이다. 그러므로 스파크는 위의 실행 과정을 순서대로 따르지 않으며, A로 시작하는 단어를 세고 결과를 출력하는 작업만 수행한다.

### 스키마

데이터프레임과 달리 RDD는 스키마리스 데이터구조다. 그러므로 RDD를 사용할 때 병렬 처리하는 것은 전혀 문제가 되지 않는다.

그래서 튜플, dict, 리스트와 같은 거의 모든 데이터 구조를 섞을 수 있고, 이는 스파크에서 전혀 문제가 되지 안흔ㄴ다.

데이터셋에 대해 `.collect` 함수를 수행하면 파이썬에서 일반적으로 해왔던 방식대로 객체 내의 데이터에 접근할 수 있다. 